import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/components/layout/ClientSelector.tsx");import __vite__cjsImport0_react_jsxDevRuntime from "/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=2c4c02a3"; const Fragment = __vite__cjsImport0_react_jsxDevRuntime["Fragment"]; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
let prevRefreshReg;
let prevRefreshSig;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = RefreshRuntime.getRefreshReg("C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx");
  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;
}
var _s = $RefreshSig$();
import __vite__cjsImport3_react from "/node_modules/.vite/deps/react.js?v=2c4c02a3"; const useState = __vite__cjsImport3_react["useState"]; const useEffect = __vite__cjsImport3_react["useEffect"];
import { Building2, ChevronDown, Check, X } from "/node_modules/.vite/deps/lucide-react.js?v=2c4c02a3";
import { useClient } from "/src/context/ClientContext.tsx?t=1763084365355";
export function ClientSelector() {
  _s();
  const { activeClient, setActiveClient, clearActiveClient } = useClient();
  const [clients, setClients] = useState([]);
  const [isOpen, setIsOpen] = useState(false);
  const [loading, setLoading] = useState(false);
  useEffect(() => {
    loadClients();
  }, []);
  const loadClients = async () => {
    setLoading(true);
    try {
      const data = await window.api.listClients();
      console.log("Loaded clients:", data);
      setClients(data || []);
    } catch (error) {
      console.error("Failed to load clients:", error);
    } finally {
      setLoading(false);
    }
  };
  const handleToggleDropdown = () => {
    if (!isOpen) {
      loadClients();
    }
    setIsOpen(!isOpen);
  };
  const handleSelectClient = (client) => {
    setActiveClient({ id: client.id, name: client.name });
    setIsOpen(false);
  };
  const handleClearClient = (e) => {
    e.stopPropagation();
    clearActiveClient();
    setIsOpen(false);
  };
  return /* @__PURE__ */ jsxDEV("div", { className: "relative", children: [
    /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-1", children: [
      /* @__PURE__ */ jsxDEV(
        "button",
        {
          onClick: handleToggleDropdown,
          className: `flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${activeClient ? "bg-blue-600 text-white hover:bg-blue-700" : "bg-gray-700 text-gray-300 hover:bg-gray-600"}`,
          children: [
            /* @__PURE__ */ jsxDEV(Building2, { size: 18 }, void 0, false, {
              fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
              lineNumber: 83,
              columnNumber: 11
            }, this),
            /* @__PURE__ */ jsxDEV("span", { className: "text-sm font-medium", children: activeClient ? activeClient.name : "All Clients" }, void 0, false, {
              fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
              lineNumber: 84,
              columnNumber: 11
            }, this),
            /* @__PURE__ */ jsxDEV(ChevronDown, { size: 16 }, void 0, false, {
              fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
              lineNumber: 87,
              columnNumber: 11
            }, this)
          ]
        },
        void 0,
        true,
        {
          fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
          lineNumber: 75,
          columnNumber: 9
        },
        this
      ),
      activeClient && /* @__PURE__ */ jsxDEV(
        "button",
        {
          onClick: handleClearClient,
          className: `p-2 rounded-lg transition-colors ${activeClient ? "bg-blue-600 text-white hover:bg-blue-700" : "bg-gray-700 text-gray-300 hover:bg-gray-600"}`,
          title: "Clear selection",
          children: /* @__PURE__ */ jsxDEV(X, { size: 16 }, void 0, false, {
            fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
            lineNumber: 99,
            columnNumber: 13
          }, this)
        },
        void 0,
        false,
        {
          fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
          lineNumber: 90,
          columnNumber: 9
        },
        this
      )
    ] }, void 0, true, {
      fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
      lineNumber: 74,
      columnNumber: 7
    }, this),
    isOpen && /* @__PURE__ */ jsxDEV(Fragment, { children: [
      /* @__PURE__ */ jsxDEV(
        "div",
        {
          className: "fixed inset-0 z-30",
          onClick: () => setIsOpen(false)
        },
        void 0,
        false,
        {
          fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
          lineNumber: 107,
          columnNumber: 11
        },
        this
      ),
      /* @__PURE__ */ jsxDEV("div", { className: "absolute top-full left-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 z-40 max-h-96 overflow-y-auto", children: /* @__PURE__ */ jsxDEV("div", { className: "p-2", children: [
        /* @__PURE__ */ jsxDEV("div", { className: "px-3 py-2 text-xs font-semibold text-gray-500 uppercase", children: "Select Active Client" }, void 0, false, {
          fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
          lineNumber: 115,
          columnNumber: 15
        }, this),
        /* @__PURE__ */ jsxDEV(
          "button",
          {
            onClick: handleClearClient,
            className: "w-full text-left px-3 py-2 rounded hover:bg-gray-100 transition-colors flex items-center justify-between",
            children: [
              /* @__PURE__ */ jsxDEV("span", { className: "text-sm text-gray-700", children: "All Clients (No Filter)" }, void 0, false, {
                fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
                lineNumber: 124,
                columnNumber: 17
              }, this),
              !activeClient && /* @__PURE__ */ jsxDEV(Check, { size: 16, className: "text-blue-600" }, void 0, false, {
                fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
                lineNumber: 126,
                columnNumber: 15
              }, this)
            ]
          },
          void 0,
          true,
          {
            fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
            lineNumber: 120,
            columnNumber: 15
          },
          this
        ),
        /* @__PURE__ */ jsxDEV("div", { className: "border-t border-gray-200 my-2" }, void 0, false, {
          fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
          lineNumber: 130,
          columnNumber: 15
        }, this),
        loading ? /* @__PURE__ */ jsxDEV("div", { className: "px-3 py-4 text-sm text-gray-500 text-center", children: "Loading clients..." }, void 0, false, {
          fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
          lineNumber: 133,
          columnNumber: 13
        }, this) : clients.length === 0 ? /* @__PURE__ */ jsxDEV("div", { className: "px-3 py-4 text-sm text-gray-500 text-center", children: "No clients available" }, void 0, false, {
          fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
          lineNumber: 137,
          columnNumber: 13
        }, this) : clients.map(
          (client) => /* @__PURE__ */ jsxDEV(
            "button",
            {
              onClick: () => handleSelectClient(client),
              className: "w-full text-left px-3 py-2 rounded hover:bg-gray-100 transition-colors flex items-center justify-between",
              children: [
                /* @__PURE__ */ jsxDEV("div", { children: [
                  /* @__PURE__ */ jsxDEV("div", { className: "text-sm font-medium text-gray-900", children: client.name }, void 0, false, {
                    fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
                    lineNumber: 148,
                    columnNumber: 23
                  }, this),
                  /* @__PURE__ */ jsxDEV("div", { className: "text-xs text-gray-500", children: [
                    "Added ",
                    new Date(client.createdAt).toLocaleDateString()
                  ] }, void 0, true, {
                    fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
                    lineNumber: 151,
                    columnNumber: 23
                  }, this)
                ] }, void 0, true, {
                  fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
                  lineNumber: 147,
                  columnNumber: 21
                }, this),
                activeClient?.id === client.id && /* @__PURE__ */ jsxDEV(Check, { size: 16, className: "text-blue-600" }, void 0, false, {
                  fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
                  lineNumber: 156,
                  columnNumber: 15
                }, this)
              ]
            },
            client.id,
            true,
            {
              fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
              lineNumber: 142,
              columnNumber: 13
            },
            this
          )
        )
      ] }, void 0, true, {
        fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
        lineNumber: 114,
        columnNumber: 13
      }, this) }, void 0, false, {
        fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
        lineNumber: 113,
        columnNumber: 11
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
      lineNumber: 105,
      columnNumber: 7
    }, this)
  ] }, void 0, true, {
    fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
    lineNumber: 73,
    columnNumber: 5
  }, this);
}
_s(ClientSelector, "n28h8ZS0GF8HOY/ctHi/VewdhGY=", false, function() {
  return [useClient];
});
_c = ClientSelector;
var _c;
$RefreshReg$(_c, "ClientSelector");
if (import.meta.hot && !inWebWorker) {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
if (import.meta.hot && !inWebWorker) {
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}

//# sourceMappingURL=data:application/json;base64,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QUE7QUFBQSx5QkFFQTtBQUFBLHFCQU5GO0FBQUE7QUFBQTtBQUFBO0FBQUEsdUJBT0E7QUFBQSxnQkFDQzdCLGNBQWNvQixPQUFPRCxPQUFPQyxNQUMzQix1QkFBQyxTQUFNLE1BQU0sSUFBSSxXQUFVLG1CQUEzQjtBQUFBO0FBQUE7QUFBQTtBQUFBLHVCQUEwQztBQUFBO0FBQUE7QUFBQSxZQWJ2Q0QsT0FBT0M7QUFBQUEsWUFEZDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFVBZ0JBO0FBQUEsUUFDRDtBQUFBLFdBN0NMO0FBQUE7QUFBQTtBQUFBO0FBQUEsYUErQ0EsS0FoREY7QUFBQTtBQUFBO0FBQUE7QUFBQSxhQWlEQTtBQUFBLFNBekRGO0FBQUE7QUFBQTtBQUFBO0FBQUEsV0EwREE7QUFBQSxPQTFGSjtBQUFBO0FBQUE7QUFBQTtBQUFBLFNBNEZBO0FBRUo7QUFBQ3JCLEdBekllRCxnQkFBYztBQUFBLFVBQ2lDRCxTQUFTO0FBQUE7QUFBQWlDLEtBRHhEaEM7QUFBYyxJQUFBZ0M7QUFBQUMsYUFBQUQsSUFBQSIsIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlRWZmZWN0IiwiQnVpbGRpbmcyIiwiQ2hldnJvbkRvd24iLCJDaGVjayIsIlgiLCJ1c2VDbGllbnQiLCJDbGllbnRTZWxlY3RvciIsIl9zIiwiYWN0aXZlQ2xpZW50Iiwic2V0QWN0aXZlQ2xpZW50IiwiY2xlYXJBY3RpdmVDbGllbnQiLCJjbGllbnRzIiwic2V0Q2xpZW50cyIsImlzT3BlbiIsInNldElzT3BlbiIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwibG9hZENsaWVudHMiLCJkYXRhIiwid2luZG93IiwiYXBpIiwibGlzdENsaWVudHMiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJoYW5kbGVUb2dnbGVEcm9wZG93biIsImhhbmRsZVNlbGVjdENsaWVudCIsImNsaWVudCIsImlkIiwibmFtZSIsImhhbmRsZUNsZWFyQ2xpZW50IiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsImxlbmd0aCIsIm1hcCIsIkRhdGUiLCJjcmVhdGVkQXQiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJfYyIsIiRSZWZyZXNoUmVnJCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJDbGllbnRTZWxlY3Rvci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBCdWlsZGluZzIsIENoZXZyb25Eb3duLCBDaGVjaywgWCB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XG5pbXBvcnQgeyB1c2VDbGllbnQgfSBmcm9tICdAL2NvbnRleHQvQ2xpZW50Q29udGV4dCc7XG5cbmludGVyZmFjZSBDbGllbnQge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGNyZWF0ZWRBdDogRGF0ZSB8IHN0cmluZztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIENsaWVudFNlbGVjdG9yKCkge1xuICBjb25zdCB7IGFjdGl2ZUNsaWVudCwgc2V0QWN0aXZlQ2xpZW50LCBjbGVhckFjdGl2ZUNsaWVudCB9ID0gdXNlQ2xpZW50KCk7XG4gIGNvbnN0IFtjbGllbnRzLCBzZXRDbGllbnRzXSA9IHVzZVN0YXRlPENsaWVudFtdPihbXSk7XG4gIGNvbnN0IFtpc09wZW4sIHNldElzT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxvYWRDbGllbnRzKCk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBsb2FkQ2xpZW50cyA9IGFzeW5jICgpID0+IHtcbiAgICBzZXRMb2FkaW5nKHRydWUpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgd2luZG93LmFwaS5saXN0Q2xpZW50cygpO1xuICAgICAgY29uc29sZS5sb2coJ0xvYWRlZCBjbGllbnRzOicsIGRhdGEpOyAvLyBEZWJ1ZyBsb2dcbiAgICAgIHNldENsaWVudHMoZGF0YSB8fCBbXSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGNsaWVudHM6JywgZXJyb3IpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gUmVmcmVzaCBjbGllbnRzIGxpc3Qgd2hlbiBkcm9wZG93biBvcGVuc1xuICBjb25zdCBoYW5kbGVUb2dnbGVEcm9wZG93biA9ICgpID0+IHtcbiAgICBpZiAoIWlzT3Blbikge1xuICAgICAgbG9hZENsaWVudHMoKTsgLy8gUmVmcmVzaCB0aGUgbGlzdCB3aGVuIG9wZW5pbmdcbiAgICB9XG4gICAgc2V0SXNPcGVuKCFpc09wZW4pO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVNlbGVjdENsaWVudCA9IChjbGllbnQ6IENsaWVudCkgPT4ge1xuICAgIHNldEFjdGl2ZUNsaWVudCh7IGlkOiBjbGllbnQuaWQsIG5hbWU6IGNsaWVudC5uYW1lIH0pO1xuICAgIHNldElzT3BlbihmYWxzZSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQ2xlYXJDbGllbnQgPSAoZTogUmVhY3QuTW91c2VFdmVudCkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgY2xlYXJBY3RpdmVDbGllbnQoKTtcbiAgICBzZXRJc09wZW4oZmFsc2UpO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMVwiPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgb25DbGljaz17aGFuZGxlVG9nZ2xlRHJvcGRvd259XG4gICAgICAgICAgY2xhc3NOYW1lPXtgZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yIHB4LTQgcHktMiByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzICR7XG4gICAgICAgICAgICBhY3RpdmVDbGllbnRcbiAgICAgICAgICAgICAgPyAnYmctYmx1ZS02MDAgdGV4dC13aGl0ZSBob3ZlcjpiZy1ibHVlLTcwMCdcbiAgICAgICAgICAgICAgOiAnYmctZ3JheS03MDAgdGV4dC1ncmF5LTMwMCBob3ZlcjpiZy1ncmF5LTYwMCdcbiAgICAgICAgICB9YH1cbiAgICAgICAgPlxuICAgICAgICAgIDxCdWlsZGluZzIgc2l6ZT17MTh9IC8+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bVwiPlxuICAgICAgICAgICAge2FjdGl2ZUNsaWVudCA/IGFjdGl2ZUNsaWVudC5uYW1lIDogJ0FsbCBDbGllbnRzJ31cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPENoZXZyb25Eb3duIHNpemU9ezE2fSAvPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAge2FjdGl2ZUNsaWVudCAmJiAoXG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQ2xlYXJDbGllbnR9XG4gICAgICAgICAgICBjbGFzc05hbWU9e2BwLTIgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9ycyAke1xuICAgICAgICAgICAgICBhY3RpdmVDbGllbnRcbiAgICAgICAgICAgICAgICA/ICdiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIGhvdmVyOmJnLWJsdWUtNzAwJ1xuICAgICAgICAgICAgICAgIDogJ2JnLWdyYXktNzAwIHRleHQtZ3JheS0zMDAgaG92ZXI6YmctZ3JheS02MDAnXG4gICAgICAgICAgICB9YH1cbiAgICAgICAgICAgIHRpdGxlPVwiQ2xlYXIgc2VsZWN0aW9uXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8WCBzaXplPXsxNn0gLz5cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7aXNPcGVuICYmIChcbiAgICAgICAgPD5cbiAgICAgICAgICB7LyogQmFja2Ryb3AgKi99XG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiZml4ZWQgaW5zZXQtMCB6LTMwXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldElzT3BlbihmYWxzZSl9XG4gICAgICAgICAgLz5cblxuICAgICAgICAgIHsvKiBEcm9wZG93biAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC1mdWxsIGxlZnQtMCBtdC0yIHctNjQgYmctd2hpdGUgcm91bmRlZC1sZyBzaGFkb3ctbGcgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCB6LTQwIG1heC1oLTk2IG92ZXJmbG93LXktYXV0b1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTJcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJweC0zIHB5LTIgdGV4dC14cyBmb250LXNlbWlib2xkIHRleHQtZ3JheS01MDAgdXBwZXJjYXNlXCI+XG4gICAgICAgICAgICAgICAgU2VsZWN0IEFjdGl2ZSBDbGllbnRcbiAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgey8qIENsZWFyIFNlbGVjdGlvbiBPcHRpb24gKi99XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVDbGVhckNsaWVudH1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgdGV4dC1sZWZ0IHB4LTMgcHktMiByb3VuZGVkIGhvdmVyOmJnLWdyYXktMTAwIHRyYW5zaXRpb24tY29sb3JzIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS03MDBcIj5BbGwgQ2xpZW50cyAoTm8gRmlsdGVyKTwvc3Bhbj5cbiAgICAgICAgICAgICAgICB7IWFjdGl2ZUNsaWVudCAmJiAoXG4gICAgICAgICAgICAgICAgICA8Q2hlY2sgc2l6ZT17MTZ9IGNsYXNzTmFtZT1cInRleHQtYmx1ZS02MDBcIiAvPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYm9yZGVyLXQgYm9yZGVyLWdyYXktMjAwIG15LTJcIiAvPlxuXG4gICAgICAgICAgICAgIHtsb2FkaW5nID8gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtMyBweS00IHRleHQtc20gdGV4dC1ncmF5LTUwMCB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgTG9hZGluZyBjbGllbnRzLi4uXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICkgOiBjbGllbnRzLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB4LTMgcHktNCB0ZXh0LXNtIHRleHQtZ3JheS01MDAgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgIE5vIGNsaWVudHMgYXZhaWxhYmxlXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgY2xpZW50cy5tYXAoKGNsaWVudCkgPT4gKFxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBrZXk9e2NsaWVudC5pZH1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlU2VsZWN0Q2xpZW50KGNsaWVudCl9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCB0ZXh0LWxlZnQgcHgtMyBweS0yIHJvdW5kZWQgaG92ZXI6YmctZ3JheS0xMDAgdHJhbnNpdGlvbi1jb2xvcnMgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2NsaWVudC5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICBBZGRlZCB7bmV3IERhdGUoY2xpZW50LmNyZWF0ZWRBdCkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICB7YWN0aXZlQ2xpZW50Py5pZCA9PT0gY2xpZW50LmlkICYmIChcbiAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2sgc2l6ZT17MTZ9IGNsYXNzTmFtZT1cInRleHQtYmx1ZS02MDBcIiAvPlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8Lz5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwiZmlsZSI6IkM6L1VzZXJzL0JpbGwuUy9zYWZldHktaW50ZWxsaWdlbmNlLWVuZ2luZS9zcmMvY29tcG9uZW50cy9sYXlvdXQvQ2xpZW50U2VsZWN0b3IudHN4In0=
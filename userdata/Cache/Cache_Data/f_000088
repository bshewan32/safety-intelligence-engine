import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/components/layout/ClientSelector.tsx");import __vite__cjsImport0_react_jsxDevRuntime from "/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=2c4c02a3"; const Fragment = __vite__cjsImport0_react_jsxDevRuntime["Fragment"]; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
let prevRefreshReg;
let prevRefreshSig;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = RefreshRuntime.getRefreshReg("C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx");
  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;
}
var _s = $RefreshSig$();
import __vite__cjsImport3_react from "/node_modules/.vite/deps/react.js?v=2c4c02a3"; const useState = __vite__cjsImport3_react["useState"]; const useEffect = __vite__cjsImport3_react["useEffect"];
import { Building2, ChevronDown, Check, X } from "/node_modules/.vite/deps/lucide-react.js?v=2c4c02a3";
import { useClient } from "/src/context/ClientContext.tsx?t=1763088532135";
export function ClientSelector() {
  _s();
  const { activeClient, setActiveClient, clearActiveClient } = useClient();
  const [clients, setClients] = useState([]);
  const [isOpen, setIsOpen] = useState(false);
  const [loading, setLoading] = useState(false);
  useEffect(() => {
    loadClients();
  }, []);
  const loadClients = async () => {
    setLoading(true);
    try {
      const data = await window.api.listClients();
      setClients(data || []);
    } catch (error) {
      console.error("Failed to load clients:", error);
    } finally {
      setLoading(false);
    }
  };
  const handleToggleDropdown = () => {
    if (!isOpen) {
      loadClients();
    }
    setIsOpen(!isOpen);
  };
  const handleSelectClient = (client) => {
    setActiveClient({ id: client.id, name: client.name });
    setIsOpen(false);
  };
  const handleClearClient = (e) => {
    e.stopPropagation();
    clearActiveClient();
    setIsOpen(false);
  };
  return /* @__PURE__ */ jsxDEV("div", { className: "relative", children: [
    /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-1", children: [
      /* @__PURE__ */ jsxDEV(
        "button",
        {
          onClick: handleToggleDropdown,
          className: `flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${activeClient ? "bg-blue-600 text-white hover:bg-blue-700" : "bg-gray-700 text-gray-300 hover:bg-gray-600"}`,
          children: [
            /* @__PURE__ */ jsxDEV(Building2, { size: 18 }, void 0, false, {
              fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
              lineNumber: 82,
              columnNumber: 11
            }, this),
            /* @__PURE__ */ jsxDEV("span", { className: "text-sm font-medium", children: activeClient ? activeClient.name : "All Clients" }, void 0, false, {
              fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
              lineNumber: 83,
              columnNumber: 11
            }, this),
            /* @__PURE__ */ jsxDEV(ChevronDown, { size: 16 }, void 0, false, {
              fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
              lineNumber: 86,
              columnNumber: 11
            }, this)
          ]
        },
        void 0,
        true,
        {
          fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
          lineNumber: 74,
          columnNumber: 9
        },
        this
      ),
      activeClient && /* @__PURE__ */ jsxDEV(
        "button",
        {
          onClick: handleClearClient,
          className: `p-2 rounded-lg transition-colors ${activeClient ? "bg-blue-600 text-white hover:bg-blue-700" : "bg-gray-700 text-gray-300 hover:bg-gray-600"}`,
          title: "Clear selection",
          children: /* @__PURE__ */ jsxDEV(X, { size: 16 }, void 0, false, {
            fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
            lineNumber: 98,
            columnNumber: 13
          }, this)
        },
        void 0,
        false,
        {
          fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
          lineNumber: 89,
          columnNumber: 9
        },
        this
      )
    ] }, void 0, true, {
      fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
      lineNumber: 73,
      columnNumber: 7
    }, this),
    isOpen && /* @__PURE__ */ jsxDEV(Fragment, { children: [
      /* @__PURE__ */ jsxDEV(
        "div",
        {
          className: "fixed inset-0 z-30",
          onClick: () => setIsOpen(false)
        },
        void 0,
        false,
        {
          fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
          lineNumber: 106,
          columnNumber: 11
        },
        this
      ),
      /* @__PURE__ */ jsxDEV("div", { className: "absolute top-full left-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 z-40 max-h-96 overflow-y-auto", children: /* @__PURE__ */ jsxDEV("div", { className: "p-2", children: [
        /* @__PURE__ */ jsxDEV("div", { className: "px-3 py-2 text-xs font-semibold text-gray-500 uppercase", children: "Select Active Client" }, void 0, false, {
          fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
          lineNumber: 114,
          columnNumber: 15
        }, this),
        /* @__PURE__ */ jsxDEV(
          "button",
          {
            onClick: handleClearClient,
            className: "w-full text-left px-3 py-2 rounded hover:bg-gray-100 transition-colors flex items-center justify-between",
            children: [
              /* @__PURE__ */ jsxDEV("span", { className: "text-sm text-gray-700", children: "All Clients (No Filter)" }, void 0, false, {
                fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
                lineNumber: 123,
                columnNumber: 17
              }, this),
              !activeClient && /* @__PURE__ */ jsxDEV(Check, { size: 16, className: "text-blue-600" }, void 0, false, {
                fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
                lineNumber: 125,
                columnNumber: 15
              }, this)
            ]
          },
          void 0,
          true,
          {
            fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
            lineNumber: 119,
            columnNumber: 15
          },
          this
        ),
        /* @__PURE__ */ jsxDEV("div", { className: "border-t border-gray-200 my-2" }, void 0, false, {
          fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
          lineNumber: 129,
          columnNumber: 15
        }, this),
        loading ? /* @__PURE__ */ jsxDEV("div", { className: "px-3 py-4 text-sm text-gray-500 text-center", children: "Loading clients..." }, void 0, false, {
          fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
          lineNumber: 132,
          columnNumber: 13
        }, this) : clients.length === 0 ? /* @__PURE__ */ jsxDEV("div", { className: "px-3 py-4 text-sm text-gray-500 text-center", children: "No clients available" }, void 0, false, {
          fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
          lineNumber: 136,
          columnNumber: 13
        }, this) : clients.map(
          (client) => /* @__PURE__ */ jsxDEV(
            "button",
            {
              onClick: () => handleSelectClient(client),
              className: "w-full text-left px-3 py-2 rounded hover:bg-gray-100 transition-colors flex items-center justify-between",
              children: [
                /* @__PURE__ */ jsxDEV("div", { children: [
                  /* @__PURE__ */ jsxDEV("div", { className: "text-sm font-medium text-gray-900", children: client.name }, void 0, false, {
                    fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
                    lineNumber: 147,
                    columnNumber: 23
                  }, this),
                  /* @__PURE__ */ jsxDEV("div", { className: "text-xs text-gray-500", children: [
                    "Added ",
                    new Date(client.createdAt).toLocaleDateString()
                  ] }, void 0, true, {
                    fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
                    lineNumber: 150,
                    columnNumber: 23
                  }, this)
                ] }, void 0, true, {
                  fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
                  lineNumber: 146,
                  columnNumber: 21
                }, this),
                activeClient?.id === client.id && /* @__PURE__ */ jsxDEV(Check, { size: 16, className: "text-blue-600" }, void 0, false, {
                  fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
                  lineNumber: 155,
                  columnNumber: 15
                }, this)
              ]
            },
            client.id,
            true,
            {
              fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
              lineNumber: 141,
              columnNumber: 13
            },
            this
          )
        )
      ] }, void 0, true, {
        fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
        lineNumber: 113,
        columnNumber: 13
      }, this) }, void 0, false, {
        fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
        lineNumber: 112,
        columnNumber: 11
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
      lineNumber: 104,
      columnNumber: 7
    }, this)
  ] }, void 0, true, {
    fileName: "C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx",
    lineNumber: 72,
    columnNumber: 5
  }, this);
}
_s(ClientSelector, "n28h8ZS0GF8HOY/ctHi/VewdhGY=", false, function() {
  return [useClient];
});
_c = ClientSelector;
var _c;
$RefreshReg$(_c, "ClientSelector");
if (import.meta.hot && !inWebWorker) {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
if (import.meta.hot && !inWebWorker) {
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("C:/Users/Bill.S/safety-intelligence-engine/src/components/layout/ClientSelector.tsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}

//# sourceMappingURL=data:application/json;base64,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QTtBQUFBO0FBQUEsdUJBT0E7QUFBQSxnQkFDQzVCLGNBQWNtQixPQUFPRCxPQUFPQyxNQUMzQix1QkFBQyxTQUFNLE1BQU0sSUFBSSxXQUFVLG1CQUEzQjtBQUFBO0FBQUE7QUFBQTtBQUFBLHVCQUEwQztBQUFBO0FBQUE7QUFBQSxZQWJ2Q0QsT0FBT0M7QUFBQUEsWUFEZDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFVBZ0JBO0FBQUEsUUFDRDtBQUFBLFdBN0NMO0FBQUE7QUFBQTtBQUFBO0FBQUEsYUErQ0EsS0FoREY7QUFBQTtBQUFBO0FBQUE7QUFBQSxhQWlEQTtBQUFBLFNBekRGO0FBQUE7QUFBQTtBQUFBO0FBQUEsV0EwREE7QUFBQSxPQTFGSjtBQUFBO0FBQUE7QUFBQTtBQUFBLFNBNEZBO0FBRUo7QUFBQ3BCLEdBeEllRCxnQkFBYztBQUFBLFVBQ2lDRCxTQUFTO0FBQUE7QUFBQWdDLEtBRHhEL0I7QUFBYyxJQUFBK0I7QUFBQUMsYUFBQUQsSUFBQSIsIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlRWZmZWN0IiwiQnVpbGRpbmcyIiwiQ2hldnJvbkRvd24iLCJDaGVjayIsIlgiLCJ1c2VDbGllbnQiLCJDbGllbnRTZWxlY3RvciIsIl9zIiwiYWN0aXZlQ2xpZW50Iiwic2V0QWN0aXZlQ2xpZW50IiwiY2xlYXJBY3RpdmVDbGllbnQiLCJjbGllbnRzIiwic2V0Q2xpZW50cyIsImlzT3BlbiIsInNldElzT3BlbiIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwibG9hZENsaWVudHMiLCJkYXRhIiwid2luZG93IiwiYXBpIiwibGlzdENsaWVudHMiLCJlcnJvciIsImNvbnNvbGUiLCJoYW5kbGVUb2dnbGVEcm9wZG93biIsImhhbmRsZVNlbGVjdENsaWVudCIsImNsaWVudCIsImlkIiwibmFtZSIsImhhbmRsZUNsZWFyQ2xpZW50IiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsImxlbmd0aCIsIm1hcCIsIkRhdGUiLCJjcmVhdGVkQXQiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJfYyIsIiRSZWZyZXNoUmVnJCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJDbGllbnRTZWxlY3Rvci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBCdWlsZGluZzIsIENoZXZyb25Eb3duLCBDaGVjaywgWCB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XG5pbXBvcnQgeyB1c2VDbGllbnQgfSBmcm9tICdAL2NvbnRleHQvQ2xpZW50Q29udGV4dCc7XG5cbmludGVyZmFjZSBDbGllbnQge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGNyZWF0ZWRBdDogRGF0ZSB8IHN0cmluZztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIENsaWVudFNlbGVjdG9yKCkge1xuICBjb25zdCB7IGFjdGl2ZUNsaWVudCwgc2V0QWN0aXZlQ2xpZW50LCBjbGVhckFjdGl2ZUNsaWVudCB9ID0gdXNlQ2xpZW50KCk7XG4gIGNvbnN0IFtjbGllbnRzLCBzZXRDbGllbnRzXSA9IHVzZVN0YXRlPENsaWVudFtdPihbXSk7XG4gIGNvbnN0IFtpc09wZW4sIHNldElzT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxvYWRDbGllbnRzKCk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBsb2FkQ2xpZW50cyA9IGFzeW5jICgpID0+IHtcbiAgICBzZXRMb2FkaW5nKHRydWUpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgd2luZG93LmFwaS5saXN0Q2xpZW50cygpO1xuICAgICAgc2V0Q2xpZW50cyhkYXRhIHx8IFtdKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgY2xpZW50czonLCBlcnJvcik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICAvLyBSZWZyZXNoIGNsaWVudHMgbGlzdCB3aGVuIGRyb3Bkb3duIG9wZW5zXG4gIGNvbnN0IGhhbmRsZVRvZ2dsZURyb3Bkb3duID0gKCkgPT4ge1xuICAgIGlmICghaXNPcGVuKSB7XG4gICAgICBsb2FkQ2xpZW50cygpOyAvLyBSZWZyZXNoIHRoZSBsaXN0IHdoZW4gb3BlbmluZ1xuICAgIH1cbiAgICBzZXRJc09wZW4oIWlzT3Blbik7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlU2VsZWN0Q2xpZW50ID0gKGNsaWVudDogQ2xpZW50KSA9PiB7XG4gICAgc2V0QWN0aXZlQ2xpZW50KHsgaWQ6IGNsaWVudC5pZCwgbmFtZTogY2xpZW50Lm5hbWUgfSk7XG4gICAgc2V0SXNPcGVuKGZhbHNlKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVDbGVhckNsaWVudCA9IChlOiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBjbGVhckFjdGl2ZUNsaWVudCgpO1xuICAgIHNldElzT3BlbihmYWxzZSk7XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0xXCI+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVUb2dnbGVEcm9wZG93bn1cbiAgICAgICAgICBjbGFzc05hbWU9e2BmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTIgcHgtNCBweS0yIHJvdW5kZWQtbGcgdHJhbnNpdGlvbi1jb2xvcnMgJHtcbiAgICAgICAgICAgIGFjdGl2ZUNsaWVudFxuICAgICAgICAgICAgICA/ICdiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIGhvdmVyOmJnLWJsdWUtNzAwJ1xuICAgICAgICAgICAgICA6ICdiZy1ncmF5LTcwMCB0ZXh0LWdyYXktMzAwIGhvdmVyOmJnLWdyYXktNjAwJ1xuICAgICAgICAgIH1gfVxuICAgICAgICA+XG4gICAgICAgICAgPEJ1aWxkaW5nMiBzaXplPXsxOH0gLz5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtXCI+XG4gICAgICAgICAgICB7YWN0aXZlQ2xpZW50ID8gYWN0aXZlQ2xpZW50Lm5hbWUgOiAnQWxsIENsaWVudHMnfVxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8Q2hldnJvbkRvd24gc2l6ZT17MTZ9IC8+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgICB7YWN0aXZlQ2xpZW50ICYmIChcbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVDbGVhckNsaWVudH1cbiAgICAgICAgICAgIGNsYXNzTmFtZT17YHAtMiByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzICR7XG4gICAgICAgICAgICAgIGFjdGl2ZUNsaWVudFxuICAgICAgICAgICAgICAgID8gJ2JnLWJsdWUtNjAwIHRleHQtd2hpdGUgaG92ZXI6YmctYmx1ZS03MDAnXG4gICAgICAgICAgICAgICAgOiAnYmctZ3JheS03MDAgdGV4dC1ncmF5LTMwMCBob3ZlcjpiZy1ncmF5LTYwMCdcbiAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgdGl0bGU9XCJDbGVhciBzZWxlY3Rpb25cIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxYIHNpemU9ezE2fSAvPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG5cbiAgICAgIHtpc09wZW4gJiYgKFxuICAgICAgICA8PlxuICAgICAgICAgIHsvKiBCYWNrZHJvcCAqL31cbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJmaXhlZCBpbnNldC0wIHotMzBcIlxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0SXNPcGVuKGZhbHNlKX1cbiAgICAgICAgICAvPlxuXG4gICAgICAgICAgey8qIERyb3Bkb3duICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLWZ1bGwgbGVmdC0wIG10LTIgdy02NCBiZy13aGl0ZSByb3VuZGVkLWxnIHNoYWRvdy1sZyBib3JkZXIgYm9yZGVyLWdyYXktMjAwIHotNDAgbWF4LWgtOTYgb3ZlcmZsb3cteS1hdXRvXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtMlwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB4LTMgcHktMiB0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTUwMCB1cHBlcmNhc2VcIj5cbiAgICAgICAgICAgICAgICBTZWxlY3QgQWN0aXZlIENsaWVudFxuICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICB7LyogQ2xlYXIgU2VsZWN0aW9uIE9wdGlvbiAqL31cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUNsZWFyQ2xpZW50fVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCB0ZXh0LWxlZnQgcHgtMyBweS0yIHJvdW5kZWQgaG92ZXI6YmctZ3JheS0xMDAgdHJhbnNpdGlvbi1jb2xvcnMgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTcwMFwiPkFsbCBDbGllbnRzIChObyBGaWx0ZXIpPC9zcGFuPlxuICAgICAgICAgICAgICAgIHshYWN0aXZlQ2xpZW50ICYmIChcbiAgICAgICAgICAgICAgICAgIDxDaGVjayBzaXplPXsxNn0gY2xhc3NOYW1lPVwidGV4dC1ibHVlLTYwMFwiIC8+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9idXR0b24+XG5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItdCBib3JkZXItZ3JheS0yMDAgbXktMlwiIC8+XG5cbiAgICAgICAgICAgICAge2xvYWRpbmcgPyAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJweC0zIHB5LTQgdGV4dC1zbSB0ZXh0LWdyYXktNTAwIHRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICBMb2FkaW5nIGNsaWVudHMuLi5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSA6IGNsaWVudHMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtMyBweS00IHRleHQtc20gdGV4dC1ncmF5LTUwMCB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgTm8gY2xpZW50cyBhdmFpbGFibGVcbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICBjbGllbnRzLm1hcCgoY2xpZW50KSA9PiAoXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIGtleT17Y2xpZW50LmlkfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVTZWxlY3RDbGllbnQoY2xpZW50KX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHRleHQtbGVmdCBweC0zIHB5LTIgcm91bmRlZCBob3ZlcjpiZy1ncmF5LTEwMCB0cmFuc2l0aW9uLWNvbG9ycyBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW5cIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y2xpZW50Lm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIEFkZGVkIHtuZXcgRGF0ZShjbGllbnQuY3JlYXRlZEF0KS50b0xvY2FsZURhdGVTdHJpbmcoKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIHthY3RpdmVDbGllbnQ/LmlkID09PSBjbGllbnQuaWQgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxDaGVjayBzaXplPXsxNn0gY2xhc3NOYW1lPVwidGV4dC1ibHVlLTYwMFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvPlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiJdLCJmaWxlIjoiQzovVXNlcnMvQmlsbC5TL3NhZmV0eS1pbnRlbGxpZ2VuY2UtZW5naW5lL3NyYy9jb21wb25lbnRzL2xheW91dC9DbGllbnRTZWxlY3Rvci50c3gifQ==